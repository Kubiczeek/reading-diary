import{t as P,h as G,e as H,a as u,r as I,s as L,b as T}from"../chunks/BVLX1rLE.js";import{i as M}from"../chunks/BLm8SxSP.js";import{i as Q,t as w,j as t,k as R,$ as U,l as i,m as a,n,o,q as r,u as V}from"../chunks/D_P7J2Hz.js";import{i as z}from"../chunks/y0faoB-u.js";import{b as j,r as B}from"../chunks/BaPMyU2t.js";import{p as W,f as X}from"../chunks/Cq41QnU_.js";import{g as Y}from"../chunks/DyYVkn8S.js";var ee=P('<div class="success-message svelte-1o3qd8i">Kniha byla úspěšně přidána! Budete přesměrováni zpět na seznam knih.</div>'),te=P('<div class="error-message svelte-1o3qd8i"> </div>'),ae=P('<div class="add-book-container svelte-1o3qd8i"><h2 class="svelte-1o3qd8i">Přidat novou knihu</h2> <!> <!> <form><div class="form-group svelte-1o3qd8i"><label for="title" class="svelte-1o3qd8i">Název knihy *</label> <input type="text" id="title" placeholder="Zadejte název knihy" required class="svelte-1o3qd8i"></div> <div class="form-group svelte-1o3qd8i"><label for="author" class="svelte-1o3qd8i">Autor</label> <input type="text" id="author" placeholder="Zadejte jméno autora (nepovinné)" class="svelte-1o3qd8i"></div> <div class="form-group svelte-1o3qd8i"><label for="note" class="svelte-1o3qd8i">Poznámka</label> <textarea id="note" placeholder="Zadejte poznámku nebo komentář ke knize (nepovinné)" rows="5" class="svelte-1o3qd8i"></textarea></div> <div class="form-actions svelte-1o3qd8i"><button type="submit" class="submit-button svelte-1o3qd8i"><!></button> <a href="/" class="cancel-button svelte-1o3qd8i">Zrušit</a></div></form></div>');function ve(O,$){Q($,!1);let d=n(""),m=n(""),p=n(""),l=n(!1),v=n(null),c=n(!1);async function A(){if(!t(d).trim()){a(v,"Název knihy je povinný.");return}try{a(l,!0),a(v,null),a(c,!1),await X("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t(d),author:t(m)||void 0,note:t(p)||void 0})}),a(c,!0),a(d,""),a(m,""),a(p,""),setTimeout(()=>{Y("/")},1500)}catch(e){a(v,e.message)}finally{a(l,!1)}}M();var f=ae();G(e=>{U.title="Čtenářský deník | Přidat knihu"});var Z=i(o(f),2);{var C=e=>{var s=ee();u(e,s)};z(Z,e=>{t(c)&&e(C)})}var N=i(Z,2);{var D=e=>{var s=te(),E=o(s,!0);r(s),w(()=>L(E,t(v))),u(e,s)};z(N,e=>{t(v)&&e(D)})}var b=i(N,2),h=o(b),_=i(o(h),2);B(_),r(h);var k=i(h,2),q=i(o(k),2);B(q),r(k);var g=i(k,2),x=i(o(g),2);I(x),r(g);var S=i(g,2),y=o(S),F=o(y);{var J=e=>{var s=T("Přidávám...");u(e,s)},K=e=>{var s=T("Přidat knihu");u(e,s)};z(F,e=>{t(l)?e(J):e(K,!1)})}r(y),V(2),r(S),r(b),r(f),w(()=>{_.disabled=t(l),q.disabled=t(l),x.disabled=t(l),y.disabled=t(l)}),j(_,()=>t(d),e=>a(d,e)),j(q,()=>t(m),e=>a(m,e)),j(x,()=>t(p),e=>a(p,e)),H("submit",b,W(A)),u(O,f),R()}export{ve as component};

function h(t){return function(...e){var n=e[0];return n.preventDefault(),t==null?void 0:t.apply(this,e)}}function i(){const e=`; ${document.cookie}`.split("; backendUrl=");return e.length===2?e.pop().split(";").shift():""}async function a(t,e={}){const n=i();if(!n)throw new Error("Backend URL is not set. Please set it in the header input.");try{const r=`${n}${t}`,s=await fetch(r,e);if(!s.ok)throw new Error(`HTTP error ${s.status}: ${s.statusText}`);if(e.method==="DELETE")return{success:!0,statusCode:s.status};const c=s.headers.get("content-type"),u=s.headers.get("content-length");if(u==="0"||!u&&s.status===204)return{success:!0,statusCode:s.status};if(c&&c.includes("application/json"))return await s.json();{const o=await s.text();if(!o)return{success:!0,statusCode:s.status};try{return JSON.parse(o)}catch{return{message:o||"Success",statusCode:s.status}}}}catch(r){throw console.error("API request failed:",r),r}}async function l(t,e){return a(`/api/books/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function f(t){return a(`/api/books/${t}`,{method:"DELETE"})}async function y(t){const e=encodeURIComponent(t);return a(`/api/books/search?q=${e}`)}export{f as d,a as f,h as p,y as s,l as u};

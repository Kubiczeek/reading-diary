function l(e){return function(...s){var n=s[0];return n.preventDefault(),e==null?void 0:e.apply(this,s)}}function i(){const s=`; ${document.cookie}`.split("; backendUrl=");return s.length===2?s.pop().split(";").shift():""}async function c(e,s={}){const n=i();if(!n)throw new Error("Backend URL is not set. Please set it in the header input.");try{const r=`${n}${e}`,t=await fetch(r,s);if(!t.ok)throw new Error(`HTTP error ${t.status}: ${t.statusText}`);if(s.method==="DELETE")return{success:!0,statusCode:t.status};const a=t.headers.get("content-type"),u=t.headers.get("content-length");if(u==="0"||!u&&t.status===204)return{success:!0,statusCode:t.status};if(a&&a.includes("application/json"))return await t.json();{const o=await t.text();if(!o)return{success:!0,statusCode:t.status};try{return JSON.parse(o)}catch{return{message:o||"Success",statusCode:t.status}}}}catch(r){throw console.error("API request failed:",r),r}}async function h(e,s){return c(`/api/books/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}async function f(e){return c(`/api/books/${e}`,{method:"DELETE"})}export{f as d,c as f,l as p,h as u};
